{"ast":null,"code":"import React,{useState,useEffect}from'react';import styled from'styled-components';import{setApiKey,getApiKey}from'../config/api';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const SetupContainer=styled.div`\n  position: fixed;\n  top: 20px;\n  right: 20px;\n  background: white;\n  border: 2px solid #667eea;\n  border-radius: 12px;\n  padding: 20px;\n  box-shadow: 0 4px 20px rgba(0, 0, 0, 0.15);\n  z-index: 1000;\n  max-width: 400px;\n  animation: slideIn 0.3s ease-out;\n  \n  @keyframes slideIn {\n    from {\n      opacity: 0;\n      transform: translateX(100%);\n    }\n    to {\n      opacity: 1;\n      transform: translateX(0);\n    }\n  }\n`;const Title=styled.h3`\n  margin: 0 0 15px 0;\n  color: #2c3e50;\n  font-size: 16px;\n  display: flex;\n  align-items: center;\n  gap: 8px;\n`;const Input=styled.input`\n  width: 100%;\n  padding: 10px;\n  border: 1px solid #ddd;\n  border-radius: 6px;\n  font-size: 14px;\n  margin-bottom: 10px;\n  &:focus {\n    outline: none;\n    border-color: #667eea;\n    box-shadow: 0 0 0 2px rgba(102, 126, 234, 0.2);\n  }\n`;const Button=styled.button`\n  background: #667eea;\n  color: white;\n  border: none;\n  padding: 8px 16px;\n  border-radius: 6px;\n  cursor: pointer;\n  font-size: 14px;\n  margin-right: 8px;\n  transition: all 0.2s ease;\n  &:hover {\n    background: #5a6fd8;\n    transform: translateY(-1px);\n  }\n`;const Status=styled.div`\n  margin-top: 10px;\n  padding: 8px;\n  border-radius: 4px;\n  font-size: 12px;\n  ${props=>props.success?`\n    background: #d4edda;\n    color: #155724;\n    border: 1px solid #c3e6cb;\n  `:props.error?`\n    background: #f8d7da;\n    color: #721c24;\n    border: 1px solid #f5c6cb;\n  `:`\n    background: #fff3cd;\n    color: #856404;\n    border: 1px solid #ffeaa7;\n  `}\n`;const HelpText=styled.div`\n  font-size: 11px;\n  color: #666;\n  margin-top: 8px;\n  line-height: 1.4;\n`;const ApiKeySetup=()=>{const[apiKey,setApiKeyState]=useState('');const[status,setStatus]=useState('');const[isVisible,setIsVisible]=useState(false);useEffect(()=>{const existingKey=getApiKey();if(existingKey){setStatus('API key已設置');}else{setStatus('請設置API key以使用AI功能');}setIsVisible(true);},[]);const handleSave=()=>{if(!apiKey.trim()){setStatus('請輸入API key');return;}try{setApiKey(apiKey.trim());setStatus('API key設置成功！');setApiKeyState('');}catch(error){setStatus('設置失敗：'+error.message);}};const handleClear=()=>{localStorage.removeItem('google_ai_api_key');setStatus('API key已清除');};const handleTest=async()=>{const currentKey=getApiKey();if(!currentKey){setStatus('請先設置API key');return;}setStatus('測試中...');try{const response=await fetch(`https://generativelanguage.googleapis.com/v1beta/models/gemini-1.5-flash:generateContent?key=${currentKey}`,{method:'POST',headers:{'Content-Type':'application/json'},body:JSON.stringify({contents:[{parts:[{text:'Hello, please respond with \"API test successful\"'}]}]})});if(response.ok){const data=await response.json();setStatus('API測試成功！');console.log('API測試響應:',data);}else{const errorText=await response.text();setStatus(`API測試失敗: ${response.status} - ${errorText}`);}}catch(error){setStatus('API測試失敗: '+error.message);}};if(!isVisible){return null;}return/*#__PURE__*/_jsxs(SetupContainer,{children:[/*#__PURE__*/_jsx(Title,{children:\"\\uD83D\\uDD11 Google AI API Key \\u8A2D\\u7F6E\"}),/*#__PURE__*/_jsx(Input,{type:\"password\",placeholder:\"\\u8ACB\\u8F38\\u5165\\u60A8\\u7684Google AI API Key\",value:apiKey,onChange:e=>setApiKeyState(e.target.value)}),/*#__PURE__*/_jsxs(\"div\",{style:{display:'flex',gap:'10px',flexWrap:'wrap'},children:[/*#__PURE__*/_jsx(Button,{onClick:handleSave,children:\"\\u4FDD\\u5B58\"}),/*#__PURE__*/_jsx(Button,{onClick:handleTest,style:{background:'#28a745'},children:\"\\u6E2C\\u8A66\"}),/*#__PURE__*/_jsx(Button,{onClick:handleClear,style:{background:'#dc3545'},children:\"\\u6E05\\u9664\"})]}),status&&/*#__PURE__*/_jsx(Status,{success:status.includes('成功'),error:status.includes('失敗'),children:status}),/*#__PURE__*/_jsxs(HelpText,{children:[\"\\uD83D\\uDCA1 \\u63D0\\u793A\\uFF1A\\u60A8\\u53EF\\u4EE5\\u5728 \",/*#__PURE__*/_jsx(\"a\",{href:\"https://makersuite.google.com/app/apikey\",target:\"_blank\",rel:\"noopener noreferrer\",children:\"Google AI Studio\"}),\" \\u7372\\u53D6\\u514D\\u8CBB\\u7684 API Key\"]})]});};export default ApiKeySetup;","map":{"version":3,"names":["React","useState","useEffect","styled","setApiKey","getApiKey","jsx","_jsx","jsxs","_jsxs","SetupContainer","div","Title","h3","Input","input","Button","button","Status","props","success","error","HelpText","ApiKeySetup","apiKey","setApiKeyState","status","setStatus","isVisible","setIsVisible","existingKey","handleSave","trim","message","handleClear","localStorage","removeItem","handleTest","currentKey","response","fetch","method","headers","body","JSON","stringify","contents","parts","text","ok","data","json","console","log","errorText","children","type","placeholder","value","onChange","e","target","style","display","gap","flexWrap","onClick","background","includes","href","rel"],"sources":["/Users/chad/oral_surgery_app_AI_version_20250807_012728/src/components/ApiKeySetup.js"],"sourcesContent":["import React, { useState, useEffect } from 'react';\nimport styled from 'styled-components';\nimport { setApiKey, getApiKey } from '../config/api';\n\nconst SetupContainer = styled.div`\n  position: fixed;\n  top: 20px;\n  right: 20px;\n  background: white;\n  border: 2px solid #667eea;\n  border-radius: 12px;\n  padding: 20px;\n  box-shadow: 0 4px 20px rgba(0, 0, 0, 0.15);\n  z-index: 1000;\n  max-width: 400px;\n  animation: slideIn 0.3s ease-out;\n  \n  @keyframes slideIn {\n    from {\n      opacity: 0;\n      transform: translateX(100%);\n    }\n    to {\n      opacity: 1;\n      transform: translateX(0);\n    }\n  }\n`;\n\nconst Title = styled.h3`\n  margin: 0 0 15px 0;\n  color: #2c3e50;\n  font-size: 16px;\n  display: flex;\n  align-items: center;\n  gap: 8px;\n`;\n\nconst Input = styled.input`\n  width: 100%;\n  padding: 10px;\n  border: 1px solid #ddd;\n  border-radius: 6px;\n  font-size: 14px;\n  margin-bottom: 10px;\n  &:focus {\n    outline: none;\n    border-color: #667eea;\n    box-shadow: 0 0 0 2px rgba(102, 126, 234, 0.2);\n  }\n`;\n\nconst Button = styled.button`\n  background: #667eea;\n  color: white;\n  border: none;\n  padding: 8px 16px;\n  border-radius: 6px;\n  cursor: pointer;\n  font-size: 14px;\n  margin-right: 8px;\n  transition: all 0.2s ease;\n  &:hover {\n    background: #5a6fd8;\n    transform: translateY(-1px);\n  }\n`;\n\nconst Status = styled.div`\n  margin-top: 10px;\n  padding: 8px;\n  border-radius: 4px;\n  font-size: 12px;\n  ${props => props.success ? `\n    background: #d4edda;\n    color: #155724;\n    border: 1px solid #c3e6cb;\n  ` : props.error ? `\n    background: #f8d7da;\n    color: #721c24;\n    border: 1px solid #f5c6cb;\n  ` : `\n    background: #fff3cd;\n    color: #856404;\n    border: 1px solid #ffeaa7;\n  `}\n`;\n\nconst HelpText = styled.div`\n  font-size: 11px;\n  color: #666;\n  margin-top: 8px;\n  line-height: 1.4;\n`;\n\nconst ApiKeySetup = () => {\n  const [apiKey, setApiKeyState] = useState('');\n  const [status, setStatus] = useState('');\n  const [isVisible, setIsVisible] = useState(false);\n\n  useEffect(() => {\n    const existingKey = getApiKey();\n    if (existingKey) {\n      setStatus('API key已設置');\n    } else {\n      setStatus('請設置API key以使用AI功能');\n    }\n    setIsVisible(true);\n  }, []);\n\n  const handleSave = () => {\n    if (!apiKey.trim()) {\n      setStatus('請輸入API key');\n      return;\n    }\n    try {\n      setApiKey(apiKey.trim());\n      setStatus('API key設置成功！');\n      setApiKeyState('');\n    } catch (error) {\n      setStatus('設置失敗：' + error.message);\n    }\n  };\n\n  const handleClear = () => {\n    localStorage.removeItem('google_ai_api_key');\n    setStatus('API key已清除');\n  };\n\n  const handleTest = async () => {\n    const currentKey = getApiKey();\n    if (!currentKey) {\n      setStatus('請先設置API key');\n      return;\n    }\n\n    setStatus('測試中...');\n    \n    try {\n      const response = await fetch(`https://generativelanguage.googleapis.com/v1beta/models/gemini-1.5-flash:generateContent?key=${currentKey}`, {\n        method: 'POST',\n        headers: {\n          'Content-Type': 'application/json',\n        },\n        body: JSON.stringify({\n          contents: [{\n            parts: [{\n              text: 'Hello, please respond with \"API test successful\"'\n            }]\n          }]\n        })\n      });\n\n      if (response.ok) {\n        const data = await response.json();\n        setStatus('API測試成功！');\n        console.log('API測試響應:', data);\n      } else {\n        const errorText = await response.text();\n        setStatus(`API測試失敗: ${response.status} - ${errorText}`);\n      }\n    } catch (error) {\n      setStatus('API測試失敗: ' + error.message);\n    }\n  };\n\n  if (!isVisible) {\n    return null;\n  }\n\n  return (\n    <SetupContainer>\n      <Title>🔑 Google AI API Key 設置</Title>\n      <Input\n        type=\"password\"\n        placeholder=\"請輸入您的Google AI API Key\"\n        value={apiKey}\n        onChange={(e) => setApiKeyState(e.target.value)}\n      />\n      <div style={{ display: 'flex', gap: '10px', flexWrap: 'wrap' }}>\n        <Button onClick={handleSave}>保存</Button>\n        <Button onClick={handleTest} style={{ background: '#28a745' }}>測試</Button>\n        <Button onClick={handleClear} style={{ background: '#dc3545' }}>\n          清除\n        </Button>\n      </div>\n      {status && (\n        <Status success={status.includes('成功')} error={status.includes('失敗')}>\n          {status}\n        </Status>\n      )}\n      <HelpText>\n        💡 提示：您可以在 <a href=\"https://makersuite.google.com/app/apikey\" target=\"_blank\" rel=\"noopener noreferrer\">Google AI Studio</a> 獲取免費的 API Key\n      </HelpText>\n    </SetupContainer>\n  );\n};\n\nexport default ApiKeySetup; "],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}