{"ast":null,"code":"import React,{useState,useEffect}from'react';import styled from'styled-components';import{setApiKey,getApiKey}from'../config/api';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const SetupContainer=styled.div`\n  position: fixed;\n  top: 20px;\n  right: 20px;\n  background: white;\n  border: 2px solid #667eea;\n  border-radius: 12px;\n  padding: 20px;\n  box-shadow: 0 4px 20px rgba(0, 0, 0, 0.15);\n  z-index: 1000;\n  max-width: 400px;\n`;const Title=styled.h3`\n  margin: 0 0 15px 0;\n  color: #2c3e50;\n  font-size: 16px;\n`;const Input=styled.input`\n  width: 100%;\n  padding: 10px;\n  border: 1px solid #ddd;\n  border-radius: 6px;\n  font-size: 14px;\n  margin-bottom: 10px;\n  &:focus {\n    outline: none;\n    border-color: #667eea;\n    box-shadow: 0 0 0 2px rgba(102, 126, 234, 0.2);\n  }\n`;const Button=styled.button`\n  background: #667eea;\n  color: white;\n  border: none;\n  padding: 8px 16px;\n  border-radius: 6px;\n  cursor: pointer;\n  font-size: 14px;\n  margin-right: 8px;\n  &:hover {\n    background: #5a6fd8;\n  }\n`;const Status=styled.div`\n  margin-top: 10px;\n  padding: 8px;\n  border-radius: 4px;\n  font-size: 12px;\n  ${props=>props.success?`\n    background: #d4edda;\n    color: #155724;\n    border: 1px solid #c3e6cb;\n  `:props.error?`\n    background: #f8d7da;\n    color: #721c24;\n    border: 1px solid #f5c6cb;\n  `:`\n    background: #fff3cd;\n    color: #856404;\n    border: 1px solid #ffeaa7;\n  `}\n`;const ApiKeySetup=()=>{const[apiKey,setApiKeyState]=useState('');const[status,setStatus]=useState('');useEffect(()=>{const existingKey=getApiKey();if(existingKey){setStatus('API key已設置');}},[]);const handleSave=()=>{if(!apiKey.trim()){setStatus('請輸入API key');return;}try{setApiKey(apiKey.trim());setStatus('API key設置成功！');setApiKeyState('');}catch(error){setStatus('設置失敗：'+error.message);}};const handleClear=()=>{localStorage.removeItem('google_ai_api_key');setStatus('API key已清除');};const handleTest=async()=>{const currentKey=getApiKey();if(!currentKey){setStatus('請先設置API key');return;}setStatus('測試中...');try{const response=await fetch(`https://generativelanguage.googleapis.com/v1beta/models/gemini-1.5-flash:generateContent?key=${currentKey}`,{method:'POST',headers:{'Content-Type':'application/json'},body:JSON.stringify({contents:[{parts:[{text:'Hello, please respond with \"API test successful\"'}]}]})});if(response.ok){const data=await response.json();setStatus('API測試成功！');console.log('API測試響應:',data);}else{const errorText=await response.text();setStatus(`API測試失敗: ${response.status} - ${errorText}`);}}catch(error){setStatus('API測試失敗: '+error.message);}};if(process.env.NODE_ENV!=='development'){return null;}return/*#__PURE__*/_jsxs(SetupContainer,{children:[/*#__PURE__*/_jsx(Title,{children:\"Google AI API Key \\u8A2D\\u7F6E\"}),/*#__PURE__*/_jsx(Input,{type:\"password\",placeholder:\"\\u8ACB\\u8F38\\u5165\\u60A8\\u7684Google AI API Key\",value:apiKey,onChange:e=>setApiKeyState(e.target.value)}),/*#__PURE__*/_jsxs(\"div\",{style:{display:'flex',gap:'10px',flexWrap:'wrap'},children:[/*#__PURE__*/_jsx(Button,{onClick:handleSave,children:\"\\u4FDD\\u5B58\"}),/*#__PURE__*/_jsx(Button,{onClick:handleTest,style:{background:'#28a745'},children:\"\\u6E2C\\u8A66\"}),/*#__PURE__*/_jsx(Button,{onClick:handleClear,style:{background:'#dc3545'},children:\"\\u6E05\\u9664\"})]}),status&&/*#__PURE__*/_jsx(Status,{success:status.includes('成功'),error:status.includes('失敗'),children:status})]});};export default ApiKeySetup;","map":{"version":3,"names":["React","useState","useEffect","styled","setApiKey","getApiKey","jsx","_jsx","jsxs","_jsxs","SetupContainer","div","Title","h3","Input","input","Button","button","Status","props","success","error","ApiKeySetup","apiKey","setApiKeyState","status","setStatus","existingKey","handleSave","trim","message","handleClear","localStorage","removeItem","handleTest","currentKey","response","fetch","method","headers","body","JSON","stringify","contents","parts","text","ok","data","json","console","log","errorText","process","env","NODE_ENV","children","type","placeholder","value","onChange","e","target","style","display","gap","flexWrap","onClick","background","includes"],"sources":["/Users/chad/oral_surgery_app_AI_version_20250807_012728/src/components/ApiKeySetup.js"],"sourcesContent":["import React, { useState, useEffect } from 'react';\nimport styled from 'styled-components';\nimport { setApiKey, getApiKey } from '../config/api';\n\nconst SetupContainer = styled.div`\n  position: fixed;\n  top: 20px;\n  right: 20px;\n  background: white;\n  border: 2px solid #667eea;\n  border-radius: 12px;\n  padding: 20px;\n  box-shadow: 0 4px 20px rgba(0, 0, 0, 0.15);\n  z-index: 1000;\n  max-width: 400px;\n`;\n\nconst Title = styled.h3`\n  margin: 0 0 15px 0;\n  color: #2c3e50;\n  font-size: 16px;\n`;\n\nconst Input = styled.input`\n  width: 100%;\n  padding: 10px;\n  border: 1px solid #ddd;\n  border-radius: 6px;\n  font-size: 14px;\n  margin-bottom: 10px;\n  &:focus {\n    outline: none;\n    border-color: #667eea;\n    box-shadow: 0 0 0 2px rgba(102, 126, 234, 0.2);\n  }\n`;\n\nconst Button = styled.button`\n  background: #667eea;\n  color: white;\n  border: none;\n  padding: 8px 16px;\n  border-radius: 6px;\n  cursor: pointer;\n  font-size: 14px;\n  margin-right: 8px;\n  &:hover {\n    background: #5a6fd8;\n  }\n`;\n\nconst Status = styled.div`\n  margin-top: 10px;\n  padding: 8px;\n  border-radius: 4px;\n  font-size: 12px;\n  ${props => props.success ? `\n    background: #d4edda;\n    color: #155724;\n    border: 1px solid #c3e6cb;\n  ` : props.error ? `\n    background: #f8d7da;\n    color: #721c24;\n    border: 1px solid #f5c6cb;\n  ` : `\n    background: #fff3cd;\n    color: #856404;\n    border: 1px solid #ffeaa7;\n  `}\n`;\n\nconst ApiKeySetup = () => {\n  const [apiKey, setApiKeyState] = useState('');\n  const [status, setStatus] = useState('');\n\n  useEffect(() => {\n    const existingKey = getApiKey();\n    if (existingKey) {\n      setStatus('API key已設置');\n    }\n  }, []);\n\n  const handleSave = () => {\n    if (!apiKey.trim()) {\n      setStatus('請輸入API key');\n      return;\n    }\n    try {\n      setApiKey(apiKey.trim());\n      setStatus('API key設置成功！');\n      setApiKeyState('');\n    } catch (error) {\n      setStatus('設置失敗：' + error.message);\n    }\n  };\n\n  const handleClear = () => {\n    localStorage.removeItem('google_ai_api_key');\n    setStatus('API key已清除');\n  };\n\n  const handleTest = async () => {\n    const currentKey = getApiKey();\n    if (!currentKey) {\n      setStatus('請先設置API key');\n      return;\n    }\n\n    setStatus('測試中...');\n    \n    try {\n      const response = await fetch(`https://generativelanguage.googleapis.com/v1beta/models/gemini-1.5-flash:generateContent?key=${currentKey}`, {\n        method: 'POST',\n        headers: {\n          'Content-Type': 'application/json',\n        },\n        body: JSON.stringify({\n          contents: [{\n            parts: [{\n              text: 'Hello, please respond with \"API test successful\"'\n            }]\n          }]\n        })\n      });\n\n      if (response.ok) {\n        const data = await response.json();\n        setStatus('API測試成功！');\n        console.log('API測試響應:', data);\n      } else {\n        const errorText = await response.text();\n        setStatus(`API測試失敗: ${response.status} - ${errorText}`);\n      }\n    } catch (error) {\n      setStatus('API測試失敗: ' + error.message);\n    }\n  };\n\n  if (process.env.NODE_ENV !== 'development') {\n    return null;\n  }\n\n  return (\n    <SetupContainer>\n      <Title>Google AI API Key 設置</Title>\n      <Input\n        type=\"password\"\n        placeholder=\"請輸入您的Google AI API Key\"\n        value={apiKey}\n        onChange={(e) => setApiKeyState(e.target.value)}\n      />\n      <div style={{ display: 'flex', gap: '10px', flexWrap: 'wrap' }}>\n        <Button onClick={handleSave}>保存</Button>\n        <Button onClick={handleTest} style={{ background: '#28a745' }}>測試</Button>\n        <Button onClick={handleClear} style={{ background: '#dc3545' }}>\n          清除\n        </Button>\n      </div>\n      {status && (\n        <Status success={status.includes('成功')} error={status.includes('失敗')}>\n          {status}\n        </Status>\n      )}\n    </SetupContainer>\n  );\n};\n\nexport default ApiKeySetup; "],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}